;(function(){'use strict';function d(e,g){var n;g=g||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=g.touchBoundary||10;this.layer=e;this.tapDelay=g.tapDelay||200;this.tapTimeout=g.tapTimeout||700;if(d.notNeeded(e)){return}function q(a,b){return function(){return a.apply(b,arguments)}}var l=['onMouse','onClick','onTouchStart','onTouchMove','onTouchEnd','onTouchCancel'];var m=this;for(var k=0,r=l.length;k<r;k++){m[l[k]]=q(m[l[k]],m)}if(j){e.addEventListener('mouseover',this.onMouse,true);e.addEventListener('mousedown',this.onMouse,true);e.addEventListener('mouseup',this.onMouse,true)}e.addEventListener('click',this.onClick,true);e.addEventListener('touchstart',this.onTouchStart,false);e.addEventListener('touchmove',this.onTouchMove,false);e.addEventListener('touchend',this.onTouchEnd,false);e.addEventListener('touchcancel',this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){e.removeEventListener=function(a,b,c){var f=Node.prototype.removeEventListener;if(a==='click'){f.call(e,a,b.hijacked||b,c)}else{f.call(e,a,b,c)}};e.addEventListener=function(b,c,f){var h=Node.prototype.addEventListener;if(b==='click'){h.call(e,b,c.hijacked||(c.hijacked=function(a){if(!a.propagationStopped){c(a)}}),f)}else{h.call(e,b,c,f)}}}if(typeof e.onclick==='function'){n=e.onclick;e.addEventListener('click',function(a){n(a)},false);e.onclick=null}}var o=navigator.userAgent.indexOf("Windows Phone")>=0;var j=navigator.userAgent.indexOf('Android')>0&&!o;var i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!o;var p=i&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var s=i&&(/OS [6-7]_\d/).test(navigator.userAgent);var t=navigator.userAgent.indexOf('BB10')>0;d.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case'button':case'select':case'textarea':if(a.disabled){return true}break;case'input':if((i&&a.type==='file')||a.disabled){return true}break;case'label':case'iframe':case'video':return true}return(/\bneedsclick\b/).test(a.className)};d.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case'textarea':return true;case'select':return!j;case'input':switch(a.type){case'button':case'checkbox':case'file':case'image':case'radio':case'submit':return false}return!a.disabled&&!a.readOnly;default:return(/\bneedsfocus\b/).test(a.className)}};d.prototype.sendClick=function(a,b){var c,f;if(document.activeElement&&document.activeElement!==a){document.activeElement.blur()}f=b.changedTouches[0];c=document.createEvent('MouseEvents');c.initMouseEvent(this.determineEventType(a),true,true,window,1,f.screenX,f.screenY,f.clientX,f.clientY,false,false,false,false,0,null);c.forwardedTouchEvent=true;a.dispatchEvent(c)};d.prototype.determineEventType=function(a){if(j&&a.tagName.toLowerCase()==='select'){return'mousedown'}return'click'};d.prototype.focus=function(a){var b;if(i&&a.setSelectionRange&&a.type.indexOf('date')!==0&&a.type!=='time'&&a.type!=='month'){b=a.value.length;a.setSelectionRange(b,b)}else{a.focus()}};d.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c;a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}if(b){b.fastClickLastScrollTop=b.scrollTop}};d.prototype.getTargetElementFromEventTarget=function(a){if(a.nodeType===Node.TEXT_NODE){return a.parentNode}return a};d.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1){return true}b=this.getTargetElementFromEventTarget(a.target);c=a.targetTouches[0];if(i){f=window.getSelection();if(f.rangeCount&&!f.isCollapsed){return true}if(!p){if(c.identifier&&c.identifier===this.lastTouchIdentifier){a.preventDefault();return false}this.lastTouchIdentifier=c.identifier;this.updateScrollParent(b)}}this.trackingClick=true;this.trackingClickStart=a.timeStamp;this.targetElement=b;this.touchStartX=c.pageX;this.touchStartY=c.pageY;if((a.timeStamp-this.lastClickTime)<this.tapDelay){a.preventDefault()}return true};d.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;if(Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c){return true}return false};d.prototype.onTouchMove=function(a){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a)){this.trackingClick=false;this.targetElement=null}return true};d.prototype.findControl=function(a){if(a.control!==undefined){return a.control}if(a.htmlFor){return document.getElementById(a.htmlFor)}return a.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea')};d.prototype.onTouchEnd=function(a){var b,c,f,h,e,g=this.targetElement;if(!this.trackingClick){return true}if((a.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}if((a.timeStamp-this.trackingClickStart)>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=a.timeStamp;c=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(s){e=a.changedTouches[0];g=document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset)||g;g.fastClickScrollParent=this.targetElement.fastClickScrollParent}f=g.tagName.toLowerCase();if(f==='label'){b=this.findControl(g);if(b){this.focus(g);if(j){return false}g=b}}else if(this.needsFocus(g)){if((a.timeStamp-c)>100||(i&&window.top!==window&&f==='input')){this.targetElement=null;return false}this.focus(g);this.sendClick(g,a);if(!i||f!=='select'){this.targetElement=null;a.preventDefault()}return false}if(i&&!p){h=g.fastClickScrollParent;if(h&&h.fastClickLastScrollTop!==h.scrollTop){return true}}if(!this.needsClick(g)){a.preventDefault();this.sendClick(g,a)}return false};d.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};d.prototype.onMouse=function(a){if(!this.targetElement){return true}if(a.forwardedTouchEvent){return true}if(!a.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(a.stopImmediatePropagation){a.stopImmediatePropagation()}else{a.propagationStopped=true}a.stopPropagation();a.preventDefault();return false}return true};d.prototype.onClick=function(a){var b;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(a.target.type==='submit'&&a.detail===0){return true}b=this.onMouse(a);if(!b){this.targetElement=null}return b};d.prototype.destroy=function(){var a=this.layer;if(j){a.removeEventListener('mouseover',this.onMouse,true);a.removeEventListener('mousedown',this.onMouse,true);a.removeEventListener('mouseup',this.onMouse,true)}a.removeEventListener('click',this.onClick,true);a.removeEventListener('touchstart',this.onTouchStart,false);a.removeEventListener('touchmove',this.onTouchMove,false);a.removeEventListener('touchend',this.onTouchEnd,false);a.removeEventListener('touchcancel',this.onTouchCancel,false)};d.notNeeded=function(a){var b;var c;var f;var h;if(typeof window.ontouchstart==='undefined'){return true}c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(c){if(j){b=document.querySelector('meta[name=viewport]');if(b){if(b.content.indexOf('user-scalable=no')!==-1){return true}if(c>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(t){f=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(f[1]>=10&&f[2]>=3){b=document.querySelector('meta[name=viewport]');if(b){if(b.content.indexOf('user-scalable=no')!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(a.style.msTouchAction==='none'||a.style.touchAction==='manipulation'){return true}h=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(h>=27){b=document.querySelector('meta[name=viewport]');if(b&&(b.content.indexOf('user-scalable=no')!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(a.style.touchAction==='none'||a.style.touchAction==='manipulation'){return true}return false};d.attach=function(a,b){return new d(a,b)};if(typeof define==='function'&&typeof define.amd==='object'&&define.amd){define(function(){return d})}else if(typeof module!=='undefined'&&module.exports){module.exports=d.attach;module.exports.FastClick=d}else{window.FastClick=d}}());