'use strict';(function(){$xirsys.class.create({namespace:'simplewebrtc',constructor:function(a){var b=$xirsys.simplewebrtc;if(!!a){b.tokenUrl=a+'signal/token';b.iceUrl=a+'ice';b.roomUrl=a+'room';b.wsUrl=a+'signal/list'}},fields:{connectionTypes:{default:'default',direct:'direct',server:'server'},token:"",ice:[],xirsys_opts:null},methods:{connect:function(b,c,e){this.xirsys_opts=b;c=c||{};var d=this;d.xirsysRequest($xirsys.simplewebrtc.wsUrl,function(a){d.ws=a.d.value;c.url="ws"+d.ws.substr(2,d.ws.length);c.connection=new $xirsys.connection(d,null,b);d.ref=new SimpleWebRTC(c);e.apply(d,[d.ref])})},on:function(a,b){this.ref.on(a,b)},getDomId:function(a){return this.ref.getDomId(a)},capabilities:function(){return this.ref.capabilities},createRoom:function(a,b){var c=this;if(!!a){this.xirsys_opts.room=a}c.ref.createRoom(a,b)},prepareRoom:function(a){if(!!a){this.prepare_room=a;this.ref.sessionReady=true}},joinRoom:function(a){var b=this;if(!!a){this.xirsys_opts.room=a}b.ref.joinRoom(a)},leaveRoom:function(){this.ref.leaveRoom()},xirsysRequest:function(a,b){var c=this;$xirsys.ajax.do({url:a,method:'POST',data:c.xirsys_opts}).done(b)},getLocalScreen:function(){return this.ref.getLocalScreen()},stopScreenShare:function(){this.ref.stopScreenShare()},shareScreen:function(a){this.ref.shareScreen(a)}},statics:{tokenUrl:$xirsys.baseUrl+"signal/token",iceUrl:$xirsys.baseUrl+"ice",wsUrl:$xirsys.baseUrl+"signal/list",roomUrl:$xirsys.baseUrl+"room"}})})();