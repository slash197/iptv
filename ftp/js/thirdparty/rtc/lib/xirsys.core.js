var $xirsys={class:{},baseUrl:"https://service.xirsys.com/"};(function(){$xirsys.extend=function(a,b){for(var c in b){if(typeof b[c]==="object"&&b[c]!==null){a[c]=a[c]||{};arguments.callee(a[c],b[c])}else{a[c]=b[c]}}return a};$xirsys.isArray=function(a){return(!!a)?a.constructor==Array:false};$xirsys.isString=function(a){return(typeof a=='string')};$xirsys.class.create=function(d){var e,f,h,l,o,i=[],j=function(){},m={},k={},p={},g=$xirsys,n=Object.prototype.hasOwnProperty;if(!d){return function(){}}f=d.namespace;if(!f){throw new Error("Please specify the Namespace.");}if(f.length==0||f.indexOf(" ")!=-1||f.charAt(0)=='.'||f.charAt(f.length-1)=='.'||f.indexOf("..")!=-1){throw new Error("Illegal Namespace: "+f);}i=f.split('.');for(e=0;e<i.length;e++){if(!!g)g=g[i[e]]}if(!!g){return g}if(n.call(d,'constructor')){if(typeof d.constructor!="function"){throw new TypeError("Illegal function ["+f+".constructor]!");}j=d.constructor}if(d['inherits']){this['inherits']=function(a,b){for(h in b){if(n.call(b,h)){a[h]=b[h]}}m=function(){this.constructor=a};m.prototype=b.prototype;a.prototype=new m();a.__super__=a.Super=b.prototype;h=b=m=a=null};this['inherits'](j,d['inherits'])}k=function(a,b,c){for(h in b){if(n.call(b,h)){if(!c){a.prototype[h]=b[h]}else{a[h]=b[h]}}}};if(d.methods){k(j,d.methods)}if(!d.fields){d.fields={}}d.fields.className=f;k(j,d.fields);if(d.statics){k(j,d.statics,true)}if(d.props){p=j.prototype.props=$.extend(true,{},j.prototype.props);k(p,$.extend(true,{},d.props),true)}g=$xirsys;for(e=0;e<i.length-1;e++){l=i[e];if(!g[l]){g[l]={}}else if(typeof g[l]!="object"){o=i.slice(0,e).join('.');throw new Error(o+" already exists and is not an object");}g=g[l]}g[i[i.length-1]]=j;f=i=n=g=k=e=null;return j};$xirsys.class.create({namespace:'ajax',fields:{host:{},xhr:null},methods:{request:function(a){if(typeof a=='string'){a={url:a}}a.url=a.url||'';a.method=a.method||'get';a.data=a.data||{};return this.process(a)},getParams:function(a,b){var c=[],d;for(var e in a){c.push(e+'='+encodeURIComponent(a[e]))}d=c.join('&');if(d!=''){return b?(b.indexOf('?')<0?'?'+d:'&'+d):d}return''},extend:$xirsys.extend,done:function(a){this.doneCallback=a;return this},fail:function(a){this.failCallback=a;return this},always:function(a){this.alwaysCallback=a;return this},setHeaders:function(a){for(var b in a){this.xhr&&this.xhr.setRequestHeader(b,a[b])}},process:function(b){var c=this;if(window.ActiveXObject){this.xhr=new ActiveXObject('Microsoft.XMLHTTP')}else if(window.XMLHttpRequest){this.xhr=new XMLHttpRequest()}if(this.xhr){this.xhr.onreadystatechange=function(){if(c.xhr.readyState==4&&c.xhr.status>=200&&c.xhr.status<300){var a=c.xhr.responseText;if((!b.json||b.json===true)&&typeof JSON!='undefined'){a=JSON.parse(a)}c.doneCallback&&c.doneCallback.apply(c.host,[a,c.xhr])}else if(c.xhr.readyState==4){c.failCallback&&c.failCallback.apply(c.host,[c.xhr])}c.alwaysCallback&&c.alwaysCallback.apply(c.host,[c.xhr])}}if(b.method.toLowerCase()=='get'){this.xhr.open("GET",b.url+c.getParams(b.data,b.url),true)}else{this.xhr.open(b.method,b.url,true);this.setHeaders({'X-Requested-With':'XMLHttpRequest','Content-Type':'application/json'})}if(b.headers&&typeof b.headers=='object'){this.setHeaders(b.headers)}setTimeout(function(){b.method=='get'?c.xhr.send():c.xhr.send(c.getParams(b.data))},20);return this}},statics:{inst:null,do:function($opts){var q=new $xirsys.ajax();return q.request($opts)}}});$xirsys.class.create({namespace:'events',fields:{delimiter:'.',wildcard:'*',_3:{}},methods:{on:function(a,b){var c=$xirsys.events.getInstance()._1(a);if(!this.has(a,b)){c._0.push(b)}},remove:function(a,b){var c=$xirsys.events.getInstance()._1(a);c._0=c._0||[];for(var d=0;d<c._0.length;d++){if(c._0[d]==b||b===-1){c._0.splice(d);return}}},flush:function(a){if($xirsys.isArray(a)){for(var b=0;b<a.length;b++){if(!!a[b]){this.removeAllListeners(a[b])}}}else{if(!!a[b]){this.removeListener(a[b],-1)}}},has:function(a,b){if(!b||typeof b!='function'){throw'Event handler must be supplied as a function';}var c=$xirsys.events.getInstance()._1(a);if(!c._0){c._0=[]}var d=false;for(var e=0;e<c._0.length;e++){if(c._0[e]==b)d=true}return d},emit:function(a){var b=$xirsys.events.getInstance()._1(a,true),c=Array.prototype.slice.call(arguments,0);c.shift();for(var d=0;d<b.length;d++){for(var e=0;e<b[d]._0.length;e++){b[d]._0[e].apply(this,c)}}},_1:function(a,b,c){var d=$xirsys.isString(a)?a.split(this.delimiter):$xirsys.isArray(a)?a:null;if(!d){throw'Event listener assigned to unknown type';}var e=this._3;for(var f=0;f<d.length;f++){if(!$xirsys.isString(d[f])){throw'Event identifier segment not a string value';}if(d[f]=="_0"||(d[f]==this.wildcard&&f<d.length-1)){throw'Invalid name used in event namespace.';}e=e[d[f]]=e[d[f]]||{}}e._0=e._0||[];if(b){if(!c||!$xirsys.isArray(c)){c=[]}c.push(e);if(d[d.length-1]==this.wildcard){d.pop()}if(d.length>0){d.pop();d.push(this.wildcard);this._1(d,b,c)}return c}return e}},statics:{_2:null,getInstance:function(){return $xirsys.events._2=$xirsys.events._2||new $xirsys.events()}}})})();